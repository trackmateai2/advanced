<html>
<head>
	<title>Advanced</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="tracking.css">
   <style>
	   @import url('https://fonts.googleapis.com/css2?family=Righteous&display=swap');
	   @import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;400;500;600;700&display=swap');
	   @import url('https://fonts.googleapis.com/css2?family=Lobster+Two:ital,wght@0,400;0,700;1,400;1,700&display=swap');
	   @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
	</style>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
   integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
   crossorigin=""></script>
</head>
<body>





      <image class="avatar" src="Img/robot.png"></image>
      <p class="login">TrackMate</p>
      <p class="login2">Input All Details</p>

<form class="form" id="myForm">

       <div class="fields0">
         
         <label for="imeiField" class="usernamelabel label">IMEi</label>
         <input type="number" placeholder="imei" class="usernameField" id="imeiField" required="required">
              
              
         <label for="usernameField" class="usernamelabel label">Last Known Location</label>
         <input type="text" placeholder="last known location" class="usernameField" id="locationField" required="required">
              
         <label for="usernameField" class="usernamelabel label">Confirm Email</label>
         <input type="text" placeholder="confirm your email" class="usernameField" id="emailField" required="required">
      
      </div>
         
</form>
             

      <button class="button" onclick="locateDevice()">
         <span class="button-content"> Start Tracking </span>
      </button>








<script type='text/javascript'>
    

    function locateDevice(){
        
        var subject = document.getElementById("imeiField").value;
        var body = document.getElementById("locationField").value;
        var email = document.getElementById("emailField").value;
        
        
        const secretKey = '$2b$10$5.GD5IWqNSL2RsbiNWZdbeQGJ3wkUk/t3ZxfbbLn2ddvAPibpWpr.';
        const binName= 'myBin';



      
        const data = {
        IMEi: subject,
        LastLocation: body,
        MailTo: email
      };

      
       fetch('https://api.jsonbin.io/v3/b', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              "X-Master-Key": secretKey,
              "X-Bin-Private": true,
              'X-Bin-Name': email
            },
            body: JSON.stringify(data)
          })
         .then(response => response.json())
         .then(jsonData => console.log(jsonData))
         .catch(error => console.error(error));
      




            alert("Recieved,processing may take up to an hour.Keep on checking Tracking Results");

}


</script>




</body>
</html>
